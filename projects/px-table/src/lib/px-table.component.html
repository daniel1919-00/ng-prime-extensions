<p-table
    [styleClass]="styleClass"
    [columns]="columns"
    [value]="records"
    [totalRecords]="totalRecords"
    [paginator]="paginator"
    [rows]="rowsPerPage"
    [rowsPerPageOptions]="rowsPerPageOptions"
    [selectionMode]="selectionMode"
    [selection]="selection"
    [(first)]="pageIndex"
    [sortMode]="sortMode"
    [sortField]="sortColumnId"
    [sortOrder]="sortDirection"
    [resetPageOnSort]="resetPageOnSort"
    (selectionChange)="selectionChange.emit($event)"
    [responsiveLayout]="responsiveLayout"
    [lazy]="!isDataSrcStatic"
    (onLazyLoad)="onLazyLoad($event)"
    [loading]="isLoading"
    [resizableColumns]="resizableColumns"
    [columnResizeMode]="columnResizeMode"
    [scrollable]="scrollable"
    [scrollHeight]="scrollHeight"
    [reorderableColumns]="reorderableColumns"
    [dataKey]="dataKey"
    [stateStorage]="stateStorage"
    [stateKey]="stateKey"
>
    <ng-template pTemplate="header" let-columns>
        <tr>
            <ng-container *ngFor="let column of columns; trackBy: identifyColumn">
                <th *ngIf="displayedColumns.includes(column.id)"
                    [pSortableColumn]="column.sortable ? column.id : undefined"
                    [pSortableColumnDisabled]="!column.sortable"
                >
                    {{ column.name }}
                    <p-sortIcon *ngIf="column.sortable" [field]="column.id"></p-sortIcon>
                </th>
            </ng-container>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
        <tr>
            <ng-container *ngFor="let column of columns; trackBy: identifyColumn">
                <td *ngIf="displayedColumns.includes(column.id)"
                    [ngTemplateOutlet]="!column.renderUsing ? cellRenderDefaultTemplate : (column.renderUsing.component ? cellRenderComponentTemplate : cellRenderPipeTemplate)"
                    [ngTemplateOutletContext]="{column, rowData}"></td>
            </ng-container>
        </tr>
    </ng-template>
</p-table>

<ng-template #cellRenderDefaultTemplate let-column="column" let-rowData="rowData">
    {{ rowData[column.id] }}
</ng-template>

<ng-template #cellRenderComponentTemplate let-column="column" let-rowData="rowData">
    <ng-container
        [ngComponentOutlet]="column.renderUsing.component"
        [ngComponentOutletInjector]="createRenderComponentInjector(column, rowData[column.id])"></ng-container>
</ng-template>

<ng-template #cellRenderPipeTemplate let-column="column" let-rowData="rowData">
    {{ rowData[column.id] | pxTableRenderPipe: column.renderUsing.pipe : column.renderUsing.pipeArguments || [] }}
</ng-template>
