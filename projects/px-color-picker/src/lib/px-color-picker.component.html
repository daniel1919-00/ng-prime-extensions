<ng-container *ngIf="inline; else overlayContainerRef">
    <ng-container *ngTemplateOutlet="canvas"></ng-container>
</ng-container>

<ng-template #canvas>
    <div [ngClass]="{'px-color-picker-container px-color-picker-row px-color-picker-flex-column px-color-picker-align-center': true, 'no-background': noBackground || !inline}">
        <canvas
            #pxColorPickerCanvas
            class="px-color-picker-col"
            [width]="mainCanvasSize.width"
            [height]="mainCanvasSize.height"
            [ngStyle]="{'width.px': mainCanvasSize.width, 'height.px': mainCanvasSize.height, 'padding': 0}"
        ></canvas>
        <div class="px-color-picker-col px-color-picker-row px-color-picker-align-center">
            <div class="px-color-picker-row px-color-picker-flex-column">
                <canvas
                    #pxColorPickerHueCanvas
                    class="px-hue-slider"
                    [width]="hueSliderCanvasSize.width"
                    [height]="hueSliderCanvasSize.height"
                    [ngStyle]="{'width.px': hueSliderCanvasSize.width, 'height.px': hueSliderCanvasSize.height, 'padding': 0}"></canvas>
                <canvas
                    *ngIf="!disableAlpha"
                    #pxColorPickerAlphaCanvas
                    class="px-alpha-slider px-color-picker-checkerboard-background"
                    [width]="alphaSliderCanvasSize.width"
                    [height]="alphaSliderCanvasSize.height"
                    [ngStyle]="{'width.px': alphaSliderCanvasSize.width, 'height.px': alphaSliderCanvasSize.height, 'padding': 0}"></canvas>
            </div>
            <div class="px-color-picker-preview-container px-color-picker-checkerboard-background">
                <div #pxColorPickerColorPreview class="px-color-picker-color-preview"></div>
            </div>
        </div>
        <div class="px-color-picker-col px-color-picker-row">
<!--            <input type="text" style="width:6rem;" [value]="value">-->
        </div>
    </div>
</ng-template>

<ng-template #overlayContainerRef>
    <div class="px-color-picker-preview-container px-color-picker-checkerboard-background" (click)="popupCanvasRef.toggle($event)">
        <div #pxColorPickerColorPreview class="px-color-picker-color-preview"></div>
    </div>

    <p-overlayPanel #popupCanvasRef>
        <ng-container *ngTemplateOutlet="canvas"></ng-container>
    </p-overlayPanel>
</ng-template>
